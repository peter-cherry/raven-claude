"use client";

import Link from 'next/link';
import { usePathname } from 'next/navigation';

function IconSearch() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="11" cy="11" r="7" stroke="currentColor" strokeWidth="2"/>
      <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
    </svg>
  );
}
function IconList() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="5" y="6" width="14" height="2" fill="currentColor"/>
      <rect x="5" y="11" width="14" height="2" fill="currentColor"/>
      <rect x="5" y="16" width="14" height="2" fill="currentColor"/>
    </svg>
  );
}
function IconAvatar() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="8" r="4" fill="currentColor"/>
      <path d="M4 20c0-4.418 3.582-8 8-8s8 3.582 8 8" fill="currentColor"/>
    </svg>
  );
}
function IconCopy() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="9" y="9" width="10" height="12" rx="2" stroke="currentColor" strokeWidth="2"/>
      <rect x="5" y="3" width="10" height="12" rx="2" stroke="currentColor" strokeWidth="2"/>
    </svg>
  );
}
function IconSettings() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" strokeWidth="2"/>
      <path d="M19.4 15a1 1 0 0 0 .2 1.1l.1.1a2 2 0 1 1-2.8 2.8l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9V20a2 2 0 1 1-4 0v-.1a1 1 0 0 0-.7-.9 1 1 0 0 0-1.1.2l-.1.1a2 2 0 1 1-2.8-2.8l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H4a2 2 0 1 1 0-4h.1a1 1 0 0 0 .9-.7 1 1 0 0 0-.2-1.1l-.1-.1A2 2 0 1 1 7.5 4.7l.1.1a1 1 0 0 0 1.1.2h.1a1 1 0 0 0 .6-.9V4a2 2 0 1 1 4 0v.1a1 1 0 0 0 .7.9h.1a1 1 0 0 0 1.1-.2l.1-.1A2 2 0 1 1 20 7.6l-.1.1a1 1 0 0 0-.2 1.1v.1a1 1 0 0 0 .9.6H20a2 2 0 1 1 0 4h-.1a1 1 0 0 0-.9.6Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
    </svg>
  );
}

const navItems = [
  { href: '/', Icon: IconSearch, label: 'Home' },
  { href: '/jobs', Icon: IconList, label: 'Jobs' },
  { href: '/technicians', Icon: IconAvatar, label: 'Technicians' },
  { href: '/compliance#frame-6', Icon: IconCopy, label: 'Compliance' },
];

export function Sidebar() {
  const pathname = usePathname();

  return (
    <aside className="sidebar hover-expand">
      <svg className="sidebar-svg-bg" width="68" height="1078" viewBox="0 0 68 1078" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <rect x="-36" y="-1" width="103" height="1126" fill="#151413"/>
        <rect x="-36" y="-1" width="103" height="1126" stroke="#201939" strokeWidth="2"/>
        <path d="M31 172C27.6863 172 25 174.686 25 178C25 181.314 27.6863 184 31 184C34.3137 184 37 181.314 37 178C37 174.686 34.3137 172 31 172ZM23 178C23 173.582 26.5817 170 31 170C35.4183 170 39 173.582 39 178C39 179.849 38.3729 181.551 37.3199 182.906L42.7071 188.293C43.0976 188.683 43.0976 189.317 42.7071 189.707C42.3166 190.098 41.6834 190.098 41.2929 189.707L35.9056 184.32C34.551 185.373 32.8487 186 31 186C26.5817 186 23 182.418 23 178Z" fill="#F9F3E5"/>
        <path d="M21 348.996C21 347.894 21.8954 347 23 347H33C34.1046 347 35 347.894 35 348.996V352.989H39C40.1046 352.989 41 353.883 41 354.985V364.967C41 366.069 40.1046 366.963 39 366.963H29C27.8954 366.963 27 366.069 27 364.967V360.974H23C21.8954 360.974 21 360.08 21 358.978V348.996ZM29 360.974V364.967H39V354.985H35V358.978C35 360.08 34.1046 360.974 33 360.974H29ZM33 358.978V348.996L23 348.996V358.978H33Z" fill="#F9F3E5"/>
        <path d="M29.2 291.797C27.2118 291.797 25.6 293.405 25.6 295.39C25.6 297.375 27.2118 298.983 29.2 298.983C31.1882 298.983 32.8 297.375 32.8 295.39C32.8 293.405 31.1882 291.797 29.2 291.797ZM23.8 295.39C23.8 292.413 26.2177 290 29.2 290C32.1823 290 34.6 292.413 34.6 295.39C34.6 298.367 32.1823 300.78 29.2 300.78C26.2177 300.78 23.8 298.367 23.8 295.39ZM35.3456 291.579C35.6971 291.228 36.2669 291.228 36.6184 291.579C38.7272 293.684 38.7272 297.096 36.6184 299.201C36.2669 299.552 35.6971 299.552 35.3456 299.201C34.9941 298.85 34.9941 298.282 35.3456 297.931C36.7515 296.528 36.7515 294.252 35.3456 292.849C34.9941 292.498 34.9941 291.93 35.3456 291.579ZM35.9769 303.257C36.0974 302.776 36.5861 302.483 37.0683 302.603C38.2634 302.902 39.0199 303.664 39.455 304.533C39.876 305.373 40 306.311 40 307.068C40 307.564 39.5971 307.967 39.1 307.967C38.6029 307.967 38.2 307.564 38.2 307.068C38.2 306.478 38.099 305.844 37.845 305.337C37.6051 304.858 37.2366 304.497 36.6317 304.347C36.1495 304.226 35.8563 303.738 35.9769 303.257ZM26.05 304.373C24.9165 304.373 23.8 305.463 23.8 307.068C23.8 307.564 23.3971 307.967 22.9 307.967C22.4029 307.967 22 307.564 22 307.068C22 304.704 23.7041 302.577 26.05 302.577H32.35C34.6959 302.577 36.4 304.704 36.4 307.068C36.4 307.564 35.9971 307.967 35.5 307.967C35.0029 307.967 34.6 307.564 34.6 307.068C34.6 305.463 33.4835 304.373 32.35 304.373H26.05Z" fill="#F9F3E5"/>
        <path d="M28 239.5C28.5523 239.5 29 239.052 29 238.5C29 237.948 28.5523 237.5 28 237.5C27.4477 237.5 27 237.948 27 238.5C27 239.052 27.4477 239.5 28 239.5Z" fill="#6A6288"/>
        <path d="M30 238.5C30 237.948 30.4477 237.5 31 237.5H34C34.5523 237.5 35 237.948 35 238.5C35 239.052 34.5523 239.5 34 239.5H31C30.4477 239.5 30 239.052 30 238.5Z" fill="#6A6288"/>
        <path d="M31 240.5C30.4477 240.5 30 240.948 30 241.5C30 242.052 30.4477 242.5 31 242.5H34C34.5523 242.5 35 242.052 35 241.5C35 240.948 34.5523 240.5 34 240.5H31Z" fill="#6A6288"/>
        <path d="M31 243.5C30.4477 243.5 30 243.948 30 244.5C30 245.052 30.4477 245.5 31 245.5H34C34.5523 245.5 35 245.052 35 244.5C35 243.948 34.5523 243.5 34 243.5H31Z" fill="#6A6288"/>
        <path d="M29 241.5C29 242.052 28.5523 242.5 28 242.5C27.4477 242.5 27 242.052 27 241.5C27 240.948 27.4477 240.5 28 240.5C28.5523 240.5 29 240.948 29 241.5Z" fill="#6A6288"/>
        <path d="M28 245.5C28.5523 245.5 29 245.052 29 244.5C29 243.948 28.5523 243.5 28 243.5C27.4477 243.5 27 243.948 27 244.5C27 245.052 27.4477 245.5 28 245.5Z" fill="#6A6288"/>
        <path d="M28 230C27.4477 230 27 230.448 27 231H25C23.8954 231 23 231.895 23 233V248C23 249.105 23.8954 250 25 250H37C38.1046 250 39 249.105 39 248V233C39 231.895 38.1046 231 37 231H35C35 230.448 34.5523 230 34 230H28ZM35 233H37V248H25V233H27V234C27 234.552 27.4477 235 28 235H34C34.5523 235 35 234.552 35 234V233ZM29 233V232H33V233H29Z" fill="#6A6288"/>
        <path d="M31 990C30.4477 990 30 990.448 30 991C30 992.692 27.954 993.54 26.7574 992.343C26.3669 991.953 25.7337 991.953 25.3432 992.343C24.9526 992.734 24.9526 993.367 25.3432 993.757C26.5398 994.954 25.6922 997 24 997C23.4477 997 23 997.448 23 998C23 998.552 23.4477 999 24 999C25.6924 999 26.5396 1001.05 25.3431 1002.24C24.9526 1002.63 24.9526 1003.27 25.3431 1003.66C25.7336 1004.05 26.3668 1004.05 26.7573 1003.66C27.9539 1002.46 30 1003.31 30 1005C30 1005.55 30.4477 1006 31 1006C31.5523 1006 32 1005.55 32 1005C32 1003.31 34.046 1002.46 35.2427 1003.66C35.6332 1004.05 36.2664 1004.05 36.6569 1003.66C37.0474 1003.27 37.0474 1002.63 36.6569 1002.24C35.4603 1001.05 36.3077 999 38 999C38.5523 999 39 998.552 39 998C39 997.448 38.5523 997 38 997C36.3078 997 35.4601 994.954 36.6568 993.757C37.0473 993.367 37.0473 992.734 36.6568 992.343C36.2663 991.953 35.6331 991.953 35.2426 992.343C34.046 993.54 32 992.692 32 991C32 990.448 31.5523 990 31 990ZM28.0082 990.777C28.1222 989.224 29.4181 988 31 988C32.5819 988 33.8778 989.224 33.9918 990.777C35.1704 989.76 36.9525 989.81 38.071 990.929C39.1896 992.047 39.2402 993.83 38.2229 995.008C39.7757 995.122 41 996.418 41 998C41 999.582 39.7757 1000.88 38.223 1000.99C39.2403 1002.17 39.1896 1003.95 38.0711 1005.07C36.9525 1006.19 35.1705 1006.24 33.9918 1005.22C33.8778 1006.78 32.5819 1008 31 1008C29.4181 1008 28.1222 1006.78 28.0082 1005.22C26.8295 1006.24 25.0475 1006.19 23.9289 1005.07C22.8103 1003.95 22.7597 1002.17 23.777 1000.99C22.2243 1000.88 21 999.582 21 998C21 996.418 22.2243 995.122 23.7771 995.008C22.7598 993.83 22.8104 992.047 23.929 990.929C25.0475 989.81 26.8296 989.76 28.0082 990.777Z" fill="#F9F3E5"/>
        <path d="M31 996C30.4696 996 29.9609 996.211 29.5858 996.586C29.2107 996.961 29 997.47 29 998C29 998.53 29.2107 999.039 29.5858 999.414C29.9609 999.789 30.4696 1000 31 1000C31.5304 1000 32.0391 999.789 32.4142 999.414C32.7893 999.039 33 998.53 33 998C33 997.47 32.7893 996.961 32.4142 996.586C32.0391 996.211 31.5304 996 31 996ZM28.1716 995.172C28.9217 994.421 29.9391 994 31 994C32.0609 994 33.0783 994.421 33.8284 995.172C34.5786 995.922 35 996.939 35 998C35 999.061 34.5786 1000.08 33.8284 1000.83C33.0783 1001.58 32.0609 1002 31 1002C29.9391 1002 28.9217 1001.58 28.1716 1000.83C27.4214 1000.08 27 999.061 27 998C27 996.939 27.4214 995.922 28.1716 995.172Z" fill="#F9F3E5"/>
        <path d="M31 408C26.5817 408 23 411.582 23 416C23 420.418 26.5817 424 31 424C35.4183 424 39 420.418 39 416C39 411.582 35.4183 408 31 408ZM21 416C21 410.477 25.4772 406 31 406C36.5228 406 41 410.477 41 416C41 421.523 36.5228 426 31 426C25.4772 426 21 421.523 21 416Z" fill="#F9F3E5"/>
      </svg>

      <nav className="nav-stack">
        {navItems.map(({ href, Icon, label }) => (
          <Link
            key={href}
            href={href}
            className={`nav-item ${pathname.startsWith(href.replace(/#.*/,'')) ? 'active' : ''}`}
            aria-label={label}
            title={label}
          >
            <span className="nav-icon" aria-hidden><Icon /></span>
            <span className="item-label">{label}</span>
          </Link>
        ))}
      </nav>

      <div className="bottom-push">
        <Link href="/settings" className="nav-item" aria-label="Settings" title="Settings">
          <span className="nav-icon" aria-hidden><IconSettings /></span>
          <span className="item-label">Settings</span>
        </Link>
      </div>
    </aside>
  );
}
