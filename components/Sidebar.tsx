"use client";

import Link from 'next/link';
import { usePathname } from 'next/navigation';

function IconSearch() {
  return (
    <svg width="20" height="20" viewBox="20 168 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="cp-search">
          <path d="M31 172C27.6863 172 25 174.686 25 178C25 181.314 27.6863 184 31 184C34.3137 184 37 181.314 37 178C37 174.686 34.3137 172 31 172ZM23 178C23 173.582 26.5817 170 31 170C35.4183 170 39 173.582 39 178C39 179.849 38.3729 181.551 37.3199 182.906L42.7071 188.293C43.0976 188.683 43.0976 189.317 42.7071 189.707C42.3166 190.098 41.6834 190.098 41.2929 189.707L35.9056 184.32C34.551 185.373 32.8487 186 31 186C26.5817 186 23 182.418 23 178Z"/>
        </clipPath>
      </defs>
      <path d="M31 172C27.6863 172 25 174.686 25 178C25 181.314 27.6863 184 31 184C34.3137 184 37 181.314 37 178C37 174.686 34.3137 172 31 172ZM23 178C23 173.582 26.5817 170 31 170C35.4183 170 39 173.582 39 178C39 179.849 38.3729 181.551 37.3199 182.906L42.7071 188.293C43.0976 188.683 43.0976 189.317 42.7071 189.707C42.3166 190.098 41.6834 190.098 41.2929 189.707L35.9056 184.32C34.551 185.373 32.8487 186 31 186C26.5817 186 23 182.418 23 178Z" fill="currentColor"/>
      <g clipPath="url(#cp-search)" className="icon-glow">
        <rect x="20" y="168" width="24" height="24" className="glow-fill" />
      </g>
    </svg>
  );
}
function IconList() {
  return (
    <svg width="20" height="20" viewBox="20 344 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="cp-list">
          <path d="M21 348.996C21 347.894 21.8954 347 23 347H33C34.1046 347 35 347.894 35 348.996V352.989H39C40.1046 352.989 41 353.883 41 354.985V364.967C41 366.069 40.1046 366.963 39 366.963H29C27.8954 366.963 27 366.069 27 364.967V360.974H23C21.8954 360.974 21 360.08 21 358.978V348.996ZM29 360.974V364.967H39V354.985H35V358.978C35 360.08 34.1046 360.974 33 360.974H29ZM33 358.978V348.996L23 348.996V358.978H33Z"/>
        </clipPath>
      </defs>
      <path d="M21 348.996C21 347.894 21.8954 347 23 347H33C34.1046 347 35 347.894 35 348.996V352.989H39C40.1046 352.989 41 353.883 41 354.985V364.967C41 366.069 40.1046 366.963 39 366.963H29C27.8954 366.963 27 366.069 27 364.967V360.974H23C21.8954 360.974 21 360.08 21 358.978V348.996ZM29 360.974V364.967H39V354.985H35V358.978C35 360.08 34.1046 360.974 33 360.974H29ZM33 358.978V348.996L23 348.996V358.978H33Z" fill="currentColor"/>
      <g clipPath="url(#cp-list)" className="icon-glow">
        <rect x="20" y="344" width="24" height="24" className="glow-fill" />
      </g>
    </svg>
  );
}
function IconAvatar() {
  return (
    <svg width="20" height="20" viewBox="22 288 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="cp-avatar">
          <path d="M29.2 291.797C27.2118 291.797 25.6 293.405 25.6 295.39C25.6 297.375 27.2118 298.983 29.2 298.983C31.1882 298.983 32.8 297.375 32.8 295.39C32.8 293.405 31.1882 291.797 29.2 291.797ZM23.8 295.39C23.8 292.413 26.2177 290 29.2 290C32.1823 290 34.6 292.413 34.6 295.39C34.6 298.367 32.1823 300.78 29.2 300.78C26.2177 300.78 23.8 298.367 23.8 295.39ZM35.3456 291.579C35.6971 291.228 36.2669 291.228 36.6184 291.579C38.7272 293.684 38.7272 297.096 36.6184 299.201C36.2669 299.552 35.6971 299.552 35.3456 299.201C34.9941 298.85 34.9941 298.282 35.3456 297.931C36.7515 296.528 36.7515 294.252 35.3456 292.849C34.9941 292.498 34.9941 291.93 35.3456 291.579ZM35.9769 303.257C36.0974 302.776 36.5861 302.483 37.0683 302.603C38.2634 302.902 39.0199 303.664 39.455 304.533C39.876 305.373 40 306.311 40 307.068C40 307.564 39.5971 307.967 39.1 307.967C38.6029 307.967 38.2 307.564 38.2 307.068C38.2 306.478 38.099 305.844 37.845 305.337C37.6051 304.858 37.2366 304.497 36.6317 304.347C36.1495 304.226 35.8563 303.738 35.9769 303.257ZM26.05 304.373C24.9165 304.373 23.8 305.463 23.8 307.068C23.8 307.564 23.3971 307.967 22.9 307.967C22.4029 307.967 22 307.564 22 307.068C22 304.704 23.7041 302.577 26.05 302.577H32.35C34.6959 302.577 36.4 304.704 36.4 307.068C36.4 307.564 35.9971 307.967 35.5 307.967C35.0029 307.967 34.6 307.564 34.6 307.068C34.6 305.463 33.4835 304.373 32.35 304.373H26.05Z"/>
        </clipPath>
      </defs>
      <path d="M29.2 291.797C27.2118 291.797 25.6 293.405 25.6 295.39C25.6 297.375 27.2118 298.983 29.2 298.983C31.1882 298.983 32.8 297.375 32.8 295.39C32.8 293.405 31.1882 291.797 29.2 291.797ZM23.8 295.39C23.8 292.413 26.2177 290 29.2 290C32.1823 290 34.6 292.413 34.6 295.39C34.6 298.367 32.1823 300.78 29.2 300.78C26.2177 300.78 23.8 298.367 23.8 295.39ZM35.3456 291.579C35.6971 291.228 36.2669 291.228 36.6184 291.579C38.7272 293.684 38.7272 297.096 36.6184 299.201C36.2669 299.552 35.6971 299.552 35.3456 299.201C34.9941 298.85 34.9941 298.282 35.3456 297.931C36.7515 296.528 36.7515 294.252 35.3456 292.849C34.9941 292.498 34.9941 291.93 35.3456 291.579ZM35.9769 303.257C36.0974 302.776 36.5861 302.483 37.0683 302.603C38.2634 302.902 39.0199 303.664 39.455 304.533C39.876 305.373 40 306.311 40 307.068C40 307.564 39.5971 307.967 39.1 307.967C38.6029 307.967 38.2 307.564 38.2 307.068C38.2 306.478 38.099 305.844 37.845 305.337C37.6051 304.858 37.2366 304.497 36.6317 304.347C36.1495 304.226 35.8563 303.738 35.9769 303.257ZM26.05 304.373C24.9165 304.373 23.8 305.463 23.8 307.068C23.8 307.564 23.3971 307.967 22.9 307.967C22.4029 307.967 22 307.564 22 307.068C22 304.704 23.7041 302.577 26.05 302.577H32.35C34.6959 302.577 36.4 304.704 36.4 307.068C36.4 307.564 35.9971 307.967 35.5 307.967C35.0029 307.967 34.6 307.564 34.6 307.068C34.6 305.463 33.4835 304.373 32.35 304.373H26.05Z" fill="currentColor"/>
      <g clipPath="url(#cp-avatar)" className="icon-glow">
        <rect x="22" y="288" width="24" height="24" className="glow-fill" />
      </g>
    </svg>
  );
}
function IconCopy() {
  return (
    <svg width="20" height="20" viewBox="20 228 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="cp-copy">
          <path d="M28 239.5C28.5523 239.5 29 239.052 29 238.5C29 237.948 28.5523 237.5 28 237.5C27.4477 237.5 27 237.948 27 238.5C27 239.052 27.4477 239.5 28 239.5Z"/>
          <path d="M30 238.5C30 237.948 30.4477 237.5 31 237.5H34C34.5523 237.5 35 237.948 35 238.5C35 239.052 34.5523 239.5 34 239.5H31C30.4477 239.5 30 239.052 30 238.5Z"/>
          <path d="M31 240.5C30.4477 240.5 30 240.948 30 241.5C30 242.052 30.4477 242.5 31 242.5H34C34.5523 242.5 35 242.052 35 241.5C35 240.948 34.5523 240.5 34 240.5H31Z"/>
          <path d="M31 243.5C30.4477 243.5 30 243.948 30 244.5C30 245.052 30.4477 245.5 31 245.5H34C34.5523 245.5 35 245.052 35 244.5C35 243.948 34.5523 243.5 34 243.5H31Z"/>
          <path d="M29 241.5C29 242.052 28.5523 242.5 28 242.5C27.4477 242.5 27 242.052 27 241.5C27 240.948 27.4477 240.5 28 240.5C28.5523 240.5 29 240.948 29 241.5Z"/>
          <path d="M28 245.5C28.5523 245.5 29 245.052 29 244.5C29 243.948 28.5523 243.5 28 243.5C27.4477 243.5 27 243.948 27 244.5C27 245.052 27.4477 245.5 28 245.5Z"/>
          <path d="M28 230C27.4477 230 27 230.448 27 231H25C23.8954 231 23 231.895 23 233V248C23 249.105 23.8954 250 25 250H37C38.1046 250 39 249.105 39 248V233C39 231.895 38.1046 231 37 231H35C35 230.448 34.5523 230 34 230H28ZM35 233H37V248H25V233H27V234C27 234.552 27.4477 235 28 235H34C34.5523 235 35 234.552 35 234V233ZM29 233V232H33V233H29Z"/>
        </clipPath>
      </defs>
      <g fill="currentColor">
        <path d="M28 239.5C28.5523 239.5 29 239.052 29 238.5C29 237.948 28.5523 237.5 28 237.5C27.4477 237.5 27 237.948 27 238.5C27 239.052 27.4477 239.5 28 239.5Z"/>
        <path d="M30 238.5C30 237.948 30.4477 237.5 31 237.5H34C34.5523 237.5 35 237.948 35 238.5C35 239.052 34.5523 239.5 34 239.5H31C30.4477 239.5 30 239.052 30 238.5Z"/>
        <path d="M31 240.5C30.4477 240.5 30 240.948 30 241.5C30 242.052 30.4477 242.5 31 242.5H34C34.5523 242.5 35 242.052 35 241.5C35 240.948 34.5523 240.5 34 240.5H31Z"/>
        <path d="M31 243.5C30.4477 243.5 30 243.948 30 244.5C30 245.052 30.4477 245.5 31 245.5H34C34.5523 245.5 35 245.052 35 244.5C35 243.948 34.5523 243.5 34 243.5H31Z"/>
        <path d="M29 241.5C29 242.052 28.5523 242.5 28 242.5C27.4477 242.5 27 242.052 27 241.5C27 240.948 27.4477 240.5 28 240.5C28.5523 240.5 29 240.948 29 241.5Z"/>
        <path d="M28 245.5C28.5523 245.5 29 245.052 29 244.5C29 243.948 28.5523 243.5 28 243.5C27.4477 243.5 27 243.948 27 244.5C27 245.052 27.4477 245.5 28 245.5Z"/>
        <path d="M28 230C27.4477 230 27 230.448 27 231H25C23.8954 231 23 231.895 23 233V248C23 249.105 23.8954 250 25 250H37C38.1046 250 39 249.105 39 248V233C39 231.895 38.1046 231 37 231H35C35 230.448 34.5523 230 34 230H28ZM35 233H37V248H25V233H27V234C27 234.552 27.4477 235 28 235H34C34.5523 235 35 234.552 35 234V233ZM29 233V232H33V233H29Z"/>
      </g>
      <g clipPath="url(#cp-copy)" className="icon-glow">
        <rect x="20" y="228" width="24" height="24" className="glow-fill" />
      </g>
    </svg>
  );
}
function IconSettings() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" strokeWidth="2"/>
      <path d="M19.4 15a1 1 0 0 0 .2 1.1l.1.1a2 2 0 1 1-2.8 2.8l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9V20a2 2 0 1 1-4 0v-.1a1 1 0 0 0-.7-.9 1 1 0 0 0-1.1.2l-.1.1a2 2 0 1 1-2.8-2.8l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H4a2 2 0 1 1 0-4h.1a1 1 0 0 0 .9-.7 1 1 0 0 0-.2-1.1l-.1-.1A2 2 0 1 1 7.5 4.7l.1.1a1 1 0 0 0 1.1.2h.1a1 1 0 0 0 .6-.9V4a2 2 0 1 1 4 0v.1a1 1 0 0 0 .7.9h.1a1 1 0 0 0 1.1-.2l.1-.1A2 2 0 1 1 20 7.6l-.1.1a1 1 0 0 0-.2 1.1v.1a1 1 0 0 0 .9.6H20a2 2 0 1 1 0 4h-.1a1 1 0 0 0-.9.6Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
    </svg>
  );
}

const navItems = [
  { href: '/', Icon: IconSearch, label: 'Home' },
  { href: '/jobs', Icon: IconList, label: 'Jobs' },
  { href: '/technicians', Icon: IconAvatar, label: 'Technicians' },
  { href: '/compliance#frame-6', Icon: IconCopy, label: 'Compliance' },
];

export function Sidebar() {
  const pathname = usePathname();

  return (
    <aside className="sidebar hover-expand">
      <svg className="sidebar-svg-bg" width="85" height="1128" viewBox="0 0 85 1128" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <rect x="-19" y="1" width="103" height="1126" fill="#151413"/>
        <rect x="-19" y="1" width="103" height="1126" stroke="#201939" strokeWidth="2"/>
        <path d="M48 174C44.6863 174 42 176.686 42 180C42 183.314 44.6863 186 48 186C51.3137 186 54 183.314 54 180C54 176.686 51.3137 174 48 174ZM40 180C40 175.582 43.5817 172 48 172C52.4183 172 56 175.582 56 180C56 181.849 55.3729 183.551 54.3199 184.906L59.7071 190.293C60.0976 190.683 60.0976 191.317 59.7071 191.707C59.3166 192.098 58.6834 192.098 58.2929 191.707L52.9056 186.32C51.551 187.373 49.8487 188 48 188C43.5817 188 40 184.418 40 180Z" fill="#F9F3E5"/>
        <path d="M38 350.996C38 349.894 38.8954 349 40 349H50C51.1046 349 52 349.894 52 350.996V354.989H56C57.1046 354.989 58 355.883 58 356.985V366.967C58 368.069 57.1046 368.963 56 368.963H46C44.8954 368.963 44 368.069 44 366.967V362.974H40C38.8954 362.974 38 362.08 38 360.978V350.996ZM46 362.974V366.967H56V356.985H52V360.978C52 362.08 51.1046 362.974 50 362.974H46ZM50 360.978V350.996L40 350.996V360.978H50Z" fill="#F9F3E5"/>
        <path d="M46.2 293.797C44.2118 293.797 42.6 295.405 42.6 297.39C42.6 299.375 44.2118 300.983 46.2 300.983C48.1882 300.983 49.8 299.375 49.8 297.39C49.8 295.405 48.1882 293.797 46.2 293.797ZM40.8 297.39C40.8 294.413 43.2177 292 46.2 292C49.1823 292 51.6 294.413 51.6 297.39C51.6 300.367 49.1823 302.78 46.2 302.78C43.2177 302.78 40.8 300.367 40.8 297.39ZM52.3456 293.579C52.6971 293.228 53.2669 293.228 53.6184 293.579C55.7272 295.684 55.7272 299.096 53.6184 301.201C53.2669 301.552 52.6971 301.552 52.3456 301.201C51.9941 300.85 51.9941 300.282 52.3456 299.931C53.7515 298.528 53.7515 296.252 52.3456 294.849C51.9941 294.498 51.9941 293.93 52.3456 293.579ZM52.9769 305.257C53.0974 304.776 53.5861 304.483 54.0683 304.603C55.2634 304.902 56.0199 305.664 56.455 306.533C56.876 307.373 57 308.311 57 309.068C57 309.564 56.5971 309.967 56.1 309.967C55.6029 309.967 55.2 309.564 55.2 309.068C55.2 308.478 55.099 307.844 54.845 307.337C54.6051 306.858 54.2366 306.497 53.6317 306.347C53.1495 306.226 52.8563 305.738 52.9769 305.257ZM43.05 306.373C41.9165 306.373 40.8 307.463 40.8 309.068C40.8 309.564 40.3971 309.967 39.9 309.967C39.4029 309.967 39 309.564 39 309.068C39 306.704 40.7041 304.577 43.05 304.577H49.35C51.6959 304.577 53.4 306.704 53.4 309.068C53.4 309.564 52.9971 309.967 52.5 309.967C52.0029 309.967 51.6 309.564 51.6 309.068C51.6 307.463 50.4835 306.373 49.35 306.373H43.05Z" fill="#F9F3E5"/>
        <path d="M45 241.5C45.5523 241.5 46 241.052 46 240.5C46 239.948 45.5523 239.5 45 239.5C44.4477 239.5 44 239.948 44 240.5C44 241.052 44.4477 241.5 45 241.5Z" fill="#6A6288"/>
        <path d="M47 240.5C47 239.948 47.4477 239.5 48 239.5H51C51.5523 239.5 52 239.948 52 240.5C52 241.052 51.5523 241.5 51 241.5H48C47.4477 241.5 47 241.052 47 240.5Z" fill="#6A6288"/>
        <path d="M48 242.5C47.4477 242.5 47 242.948 47 243.5C47 244.052 47.4477 244.5 48 244.5H51C51.5523 244.5 52 244.052 52 243.5C52 242.948 51.5523 242.5 51 242.5H48Z" fill="#6A6288"/>
        <path d="M48 245.5C47.4477 245.5 47 245.948 47 246.5C47 247.052 47.4477 247.5 48 247.5H51C51.5523 247.5 52 247.052 52 246.5C52 245.948 51.5523 245.5 51 245.5H48Z" fill="#6A6288"/>
        <path d="M46 243.5C46 244.052 45.5523 244.5 45 244.5C44.4477 244.5 44 244.052 44 243.5C44 242.948 44.4477 242.5 45 242.5C45.5523 242.5 46 242.948 46 243.5Z" fill="#6A6288"/>
        <path d="M45 247.5C45.5523 247.5 46 247.052 46 246.5C46 245.948 45.5523 245.5 45 245.5C44.4477 245.5 44 245.948 44 246.5C44 247.052 44.4477 247.5 45 247.5Z" fill="#6A6288"/>
        <path d="M45 232C44.4477 232 44 232.448 44 233H42C40.8954 233 40 233.895 40 235V250C40 251.105 40.8954 252 42 252H54C55.1046 252 56 251.105 56 250V235C56 233.895 55.1046 233 54 233H52C52 232.448 51.5523 232 51 232H45ZM52 235H54V250H42V235H44V236C44 236.552 44.4477 237 45 237H51C51.5523 237 52 236.552 52 236V235ZM46 235V234H50V235H46Z" fill="#6A6288"/>
        <path d="M48 992C47.4477 992 47 992.448 47 993C47 994.692 44.954 995.54 43.7574 994.343C43.3669 993.953 42.7337 993.953 42.3432 994.343C41.9526 994.734 41.9526 995.367 42.3432 995.757C43.5398 996.954 42.6922 999 41 999C40.4477 999 40 999.448 40 1000C40 1000.55 40.4477 1001 41 1001C42.6924 1001 43.5396 1003.05 42.3431 1004.24C41.9526 1004.63 41.9526 1005.27 42.3431 1005.66C42.7336 1006.05 43.3668 1006.05 43.7573 1005.66C44.9539 1004.46 47 1005.31 47 1007C47 1007.55 47.4477 1008 48 1008C48.5523 1008 49 1007.55 49 1007C49 1005.31 51.046 1004.46 52.2427 1005.66C52.6332 1006.05 53.2664 1006.05 53.6569 1005.66C54.0474 1005.27 54.0474 1004.63 53.6569 1004.24C52.4603 1003.05 53.3077 1001 55 1001C55.5523 1001 56 1000.55 56 1000C56 999.448 55.5523 999 55 999C53.3078 999 52.4601 996.954 53.6568 995.757C54.0473 995.367 54.0473 994.734 53.6568 994.343C53.2663 993.953 52.6331 993.953 52.2426 994.343C51.046 995.54 49 994.692 49 993C49 992.448 48.5523 992 48 992ZM45.0082 992.777C45.1222 991.224 46.4181 990 48 990C49.5819 990 50.8778 991.224 50.9918 992.777C52.1704 991.76 53.9525 991.81 55.071 992.929C56.1896 994.047 56.2402 995.83 55.2229 997.008C56.7757 997.122 58 998.418 58 1000C58 1001.58 56.7757 1002.88 55.223 1002.99C56.2403 1004.17 56.1896 1005.95 55.0711 1007.07C53.9525 1008.19 52.1705 1008.24 50.9918 1007.22C50.8778 1008.78 49.5819 1010 48 1010C46.4181 1010 45.1222 1008.78 45.0082 1007.22C43.8295 1008.24 42.0475 1008.19 40.9289 1007.07C39.8103 1005.95 39.7597 1004.17 40.777 1002.99C39.2243 1002.88 38 1001.58 38 1000C38 998.418 39.2243 997.122 40.7771 997.008C39.7598 995.83 39.8104 994.047 40.929 992.929C42.0475 991.81 43.8296 991.76 45.0082 992.777Z" fill="#F9F3E5"/>
        <path d="M48 998C47.4696 998 46.9609 998.211 46.5858 998.586C46.2107 998.961 46 999.47 46 1000C46 1000.53 46.2107 1001.04 46.5858 1001.41C46.9609 1001.79 47.4696 1002 48 1002C48.5304 1002 49.0391 1001.79 49.4142 1001.41C49.7893 1001.04 50 1000.53 50 1000C50 999.47 49.7893 998.961 49.4142 998.586C49.0391 998.211 48.5304 998 48 998ZM45.1716 997.172C45.9217 996.421 46.9391 996 48 996C49.0609 996 50.0783 996.421 50.8284 997.172C51.5786 997.922 52 998.939 52 1000C52 1001.06 51.5786 1002.08 50.8284 1002.83C50.0783 1003.58 49.0609 1004 48 1004C46.9391 1004 45.9217 1003.58 45.1716 1002.83C44.4214 1002.08 44 1001.06 44 1000C44 998.939 44.4214 997.922 45.1716 997.172Z" fill="#F9F3E5"/>
        <path d="M48 410C43.5817 410 40 413.582 40 418C40 422.418 43.5817 426 48 426C52.4183 426 56 422.418 56 418C56 413.582 52.4183 410 48 410ZM38 418C38 412.477 42.4772 408 48 408C53.5228 408 58 412.477 58 418C58 423.523 53.5228 428 48 428C42.4772 428 38 423.523 38 418Z" fill="#F9F3E5"/>
      </svg>

      <nav className="nav-stack">
        {navItems.map(({ href, Icon, label }) => {
          const roleClass = href === '/'
            ? 'nav-home'
            : href.startsWith('/jobs')
            ? 'nav-jobs'
            : href.startsWith('/technicians')
            ? 'nav-tech'
            : href.startsWith('/compliance')
            ? 'nav-compliance'
            : '';
          return (
            <Link
              key={href}
              href={href}
              className={`nav-item ${roleClass} ${pathname.startsWith(href.replace(/#.*/,'')) ? 'active' : ''}`}
              aria-label={label}
              title={label}
            >
              <span className="nav-icon" aria-hidden><Icon /></span>
            </Link>
          );
        })}
      </nav>

      <div className="bottom-push">
        <Link href="/settings" className="nav-item" aria-label="Settings" title="Settings">
          <span className="nav-icon" aria-hidden><IconSettings /></span>
        </Link>
      </div>
    </aside>
  );
}
